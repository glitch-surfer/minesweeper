(()=>{"use strict";const e=()=>{const e=[],t=document.querySelectorAll(".cell"),n=Math.sqrt(t.length);for(let o=0;o<t.length;o+=n){const s=[];for(let e=0;e<n;e+=1)s.push(t[o+e]);e.push(s)}return e},t=e=>{const t=e;t.classList.add("is-open"),t.textContent=t.dataset.number},n=o=>{const s=o;t(s);const c=e(),a=[...document.querySelectorAll(".cell")].findIndex((e=>e===s));let r,l;10===document.boardSize?(r=a>document.boardSize-1?+a.toString()[0]:0,l=a>document.boardSize-1?+a.toString()[1]:a):(r=Math.floor(a/document.boardSize),l=a%document.boardSize);const u=[];u.push(c[r-1]?.[l]),u.push(c[r-1]?.[l+1]),u.push(c[r-1]?.[l-1]),u.push(c[r]?.[l+1]),u.push(c[r]?.[l-1]),u.push(c[r+1]?.[l+1]),u.push(c[r+1]?.[l]),u.push(c[r+1]?.[l-1]),u.filter((e=>e&&"ðŸš©"!==e.textContent)).forEach((e=>{e.dataset.number||e.classList.contains("is-open")?t(e):n(e)}))},o=e=>{const o=e.target;!o.classList.contains("cell")||o.classList.contains("isBomb")||o.textContent||(o.classList.contains("is-open")||(document.querySelector(".moves-count").innerHTML=`Your moves: ${document.movesCount+=1}`,document.querySelector(".sound-switcher").checked&&new Audio("../src/assets/sounds/empty-cell.mp3").play()),t(o),o.dataset.number||n(o))},s=()=>{document.querySelector(".sound-switcher").checked&&new Audio("../src/assets/sounds/click.mp3").play()},c=()=>{if(!document.querySelector(".bomb")&&!document.body.classList.contains("win")&&document.querySelector(".isBomb")){s();const e=document.querySelector(".main").innerHTML,t=[...document.body.classList],n=parseInt(document.querySelector(".timer").textContent.slice(6),10),{boardSize:o,minesCount:c,movesCount:a,flagCount:r}=document,l={html:e,layoutState:t,boardSize:o,minesCount:c,movesCount:a,flagCount:r,timer:n},u=JSON.stringify(l);localStorage.setItem("savedGame",u)}},a=e=>{const t=e.target,n=document.querySelector(".counter");if(e.preventDefault(),t.classList.contains("cell")&&!t.classList.contains("is-open")){const e=new Audio("../src/assets/sounds/flag.mp3");t.textContent?(document.querySelector(".sound-switcher").checked&&e.play(),t.textContent="",document.flagCount+=1,n.textContent=`Mines count: ${document.flagCount}`):(document.querySelector(".sound-switcher").checked&&e.play(),t.textContent="ðŸš©",document.flagCount-=1,n.textContent=`Mines count: ${document.flagCount}`)}},r=e=>{const{tagName:t,classes:n,attributes:o,textContent:s,children:c}=e,a=document.createElement(t);return n&&n.forEach((e=>{a.classList.add(e)})),o&&Object.entries(o).forEach((([e,t])=>{a.setAttribute(e,t)})),s&&(a.textContent=s),c&&c.forEach((e=>{const t=r(e);a.append(t)})),a},l=r,u=e=>{const t=document.querySelector(".overlay");e.target.closest(".modal")?e.target.closest(".btn-modal")&&(t.remove(),document.body.style.overflow=""):(t.remove(),document.body.style.overflow="")},d=()=>{const e=l({tagName:"div",classes:["overlay"]});document.body.append(e),document.body.style.overflow="hidden",e.addEventListener("click",u)},m=e=>{d();const t=document.querySelector(".overlay"),n=l({tagName:"div",classes:["modal","gameover-message"]}),o=l({tagName:"button",classes:["btn-modal"],textContent:"âœ–"});n.append(o);const s=l({tagName:"p",classes:["about__text"],textContent:`${e}`});n.append(s),t.append(n)},i=e=>{const t=document.querySelector(".btn"),n=document.querySelector(".sound-switcher");if("ðŸš©"!==e.target.textContent)if(e.target.classList.contains("isBomb")){const o="Game over. Try again";[...document.querySelectorAll(".cell")].filter((e=>e.classList.contains("isBomb"))).forEach((e=>{const t=document.createElement("div");t.classList.add("bomb"),e.classList.add("is-open"),e.textContent="",e.append(t)})),n.checked&&new Audio("../src/assets/sounds/bomb.mp3").play(),e.target.firstElementChild.style.backgroundColor="red",clearInterval(document.timer),t.textContent="ðŸ˜©",m(o),g()}else{const e=[...document.querySelectorAll(".cell")].filter((e=>!e.classList.contains("is-open"))),o=document.querySelector(".moves-count").textContent.slice(11),s=`Hooray! You found all mines in ${document.querySelector(".timer").textContent.slice(7)} and ${o} moves!`;e.length===document.minesCount&&(n.checked&&new Audio("../src/assets/sounds/win.mp3").play(),clearInterval(document.timer),t.textContent="ðŸ¤©",document.body.classList.add("win"),g(),(()=>{const e=+localStorage.getItem("gameId")+1||1;e>10&&localStorage.removeItem(""+(e-10));const t=document.body.classList.value.includes("layout")?document.body.classList.value.split(" ")[0].slice(0,7):"easy",n=document.querySelector(".moves-count").textContent.slice(11),o=document.querySelector(".timer").textContent.slice(7);localStorage.setItem(e,`Game #${e} _ Mode: ${t} _ Time: ${o} _ Moves: ${n}`),localStorage.setItem("gameId",e)})(),m(s))}};function g(){const e=document.querySelector(".board");e.removeEventListener("click",o),e.removeEventListener("contextmenu",a),e.removeEventListener("click",i),e.removeEventListener("click",c)}const y=i,b=(e=0)=>{let t=e;document.timer=setInterval((()=>{document.querySelector(".timer").innerHTML=`Timer: ${t+=1} sec`}),1e3)},p=t=>{t.target.classList.contains("cell")&&"ðŸš©"!==t.target.textContent&&(document.querySelector(".board").removeEventListener("click",p),((e,t)=>{const n=document.querySelectorAll(".cell"),o=((e,t)=>{const n=[];for(;n.length<e;){const e=(o=document.boardSize**2-1,Math.floor(Math.random()*(o-0+1))+0);n.includes(e)||e===t||n.push(e)}var o;return n})(e,[...n].findIndex((e=>e===t.target)));[...n].filter(((e,t)=>o.includes(t))).forEach((e=>e.classList.add("isBomb")))})(document.minesCount,t),(()=>{const t=document.querySelectorAll(".cell"),n=(()=>{const t=e(),n=[];for(let e=0;e<t[0].length;e+=1)for(let o=0;o<t[0].length;o+=1){const s=[];s.push(t[e-1]?.[o]),s.push(t[e-1]?.[o+1]),s.push(t[e-1]?.[o-1]),s.push(t[e]?.[o+1]),s.push(t[e]?.[o-1]),s.push(t[e+1]?.[o+1]),s.push(t[e+1]?.[o]),s.push(t[e+1]?.[o-1]),n.push(s.filter((e=>e&&e.classList.contains("isBomb"))).length)}return n})();t.forEach(((e,t)=>{const o=e;!o.classList.contains("isBomb")&&n[t]&&(o.dataset.number=n[t])}))})(),b(),document.querySelector(".btn").textContent="ðŸ˜Ž")},v=p,S=()=>{document.movesCount=0;const e=(()=>{const e=l({tagName:"main",classes:["main"]}),t=l({tagName:"div",classes:["board"],attributes:{id:"board"}}),n={tagName:"div",classes:["cell"]};for(let e=0;e<document.boardSize**2;e+=1){const e=l(n);t.append(e)}return e.append(t),e})();e.prepend((()=>{const e=l({tagName:"div",classes:["controls-panel"]}),t=l({tagName:"p",classes:["moves-count"],textContent:"Your moves: 0"});e.append(t);const n=l({tagName:"button",classes:["btn"],textContent:"ðŸ˜‰"});e.append(n),document.flagCount=document.minesCount;const o={tagName:"p",classes:["counter"],textContent:`Mines count: ${document.flagCount}`},s=l(o);return e.append(s),e})()),document.body.append(e),(()=>{const e=document.getElementById("board");e.addEventListener("click",v),e.addEventListener("click",o),e.addEventListener("click",y),e.addEventListener("contextmenu",a)})(),document.querySelector(".btn").addEventListener("click",(()=>{s(),clearInterval(document.timer),document.querySelector(".timer").textContent="Timer: 0 sec",document.querySelector("main").remove(),document.body.classList.remove("win"),S()}))},h=S,C=()=>{clearInterval(document.timer),document.querySelector(".timer").textContent="Timer: 0 sec",document.querySelector("main").remove(),document.body.classList.remove("win"),h()};document.minesCount=10,document.boardSize=10,document.body.append(l({tagName:"header",classes:["header"],children:[{tagName:"div",classes:["load-game-container"],children:[{tagName:"button",classes:["save"],textContent:"Save"},{tagName:"button",classes:["load"],textContent:"Load"},{tagName:"button",classes:["about__btn"],textContent:"About"}]},{tagName:"div",classes:["mode"],children:[{tagName:"button",classes:["easy-mode"],textContent:"Easy"},{tagName:"button",classes:["medium-mode"],textContent:"Medium"},{tagName:"button",classes:["suicide-mode"],textContent:"Suicide"},{tagName:"p",classes:["settings-subtitle"],textContent:"Mines:"},{tagName:"input",classes:["mine-counter-selector"],attributes:{type:"range",value:"10",min:"10",max:"99"}}]},{tagName:"div",classes:["settings","controls-panel"],children:[{tagName:"button",classes:["btn-results"],textContent:"results"},{tagName:"p",classes:["timer"],textContent:"Timer: 0 sec"},{tagName:"label",children:[{tagName:"span",textContent:"ðŸ””"},{tagName:"input",classes:["sound-switcher"],attributes:{type:"checkbox",checked:"true"}}]},{tagName:"button",classes:["theme-switcher"]}]}]})),h(),document.querySelector(".theme-switcher").addEventListener("click",(e=>{s(),e.target.classList.toggle("is-dark"),document.body.classList.toggle("dark-theme")})),document.querySelector("label").addEventListener("click",(e=>{s();const t=e.target;document.querySelector(".sound-switcher").checked?t.textContent="ðŸ”•":t.textContent="ðŸ””"})),document.querySelector(".btn-results").addEventListener("click",(()=>{s(),d();const e=document.querySelector(".overlay"),t=l({tagName:"h2",classes:["modal-title"],textContent:"Latest Results"});e.append(t);const n=(()=>{const e=+localStorage.getItem("gameId"),t=[];for(let n=0;n<10;n+=1){const o=localStorage.getItem(e-n);t.push(o)}return t})(),o=l({tagName:"ul",classes:["modal"]}),c=l({tagName:"button",classes:["btn-modal"],textContent:"âœ–"});o.append(c),n.forEach((e=>{const t=l({tagName:"li",textContent:e});o.append(t)})),e.append(o)})),document.querySelector(".about__btn").addEventListener("click",(()=>{s(),d();const e=document.querySelector(".overlay"),t=l({tagName:"h2",classes:["modal-title"],textContent:"About Game"});e.append(t);const n=l({tagName:"div",classes:["modal","about"]}),o=l({tagName:"button",classes:["btn-modal"],textContent:"âœ–"});n.append(o);const c=l({tagName:"img",classes:["about__img"],attributes:{src:"../src/assets/img/about.png"}});n.append(c);const a=l({tagName:"a",classes:["about__text"],attributes:{href:"https://github.com/glitch-surfer"},textContent:"Made by Glitch_surfer"});n.append(a),e.append(n)})),document.querySelector(".mine-counter-selector").addEventListener("input",(e=>{document.querySelector(".counter").textContent=`Mines count: ${e.target.value}`,document.minesCount=+e.target.value,C()})),document.querySelector(".mode").addEventListener("click",(e=>{s(),e.target.classList.contains("easy-mode")?(document.boardSize=10,document.body.classList.remove("medium-layout"),document.body.classList.remove("suicide-layout"),document.querySelector(".mine-counter-selector").value=10,document.minesCount=10,C()):e.target.classList.contains("medium-mode")?(document.boardSize=15,document.body.classList.remove("suicide-layout"),document.body.classList.add("medium-layout"),document.querySelector(".mine-counter-selector").value=25,document.minesCount=25,C()):e.target.classList.contains("suicide-mode")&&(document.boardSize=25,document.body.classList.remove("medium-layout"),document.body.classList.add("suicide-layout"),document.querySelector(".mine-counter-selector").value=99,document.minesCount=99,C())})),document.querySelector(".save").addEventListener("click",c),document.querySelector(".load").addEventListener("click",(()=>{if(s(),localStorage.getItem("savedGame")){clearInterval(document.timer);const e=localStorage.getItem("savedGame"),{html:t,layoutState:n,boardSize:s,minesCount:c,movesCount:r,flagCount:l,timer:u}=JSON.parse(e);document.minesCount=c,document.boardSize=s,document.movesCount=r,document.flagCount=l,document.querySelector("main").innerHTML=t,document.body.className=n.join(" ");const d=document.getElementById("board");d.addEventListener("click",o),d.addEventListener("click",y),d.addEventListener("contextmenu",a),document.querySelector(".btn").addEventListener("click",C),document.querySelector(".mine-counter-selector").value=c,b(u)}}))})();
//# sourceMappingURL=bundle.js.map