(()=>{"use strict";const e=()=>{const e=[],t=document.querySelectorAll(".cell"),n=Math.sqrt(t.length);for(let o=0;o<t.length;o+=n){const c=[];for(let e=0;e<n;e+=1)c.push(t[o+e]);e.push(c)}return e},t=e=>{const t=e;t.classList.add("is-open"),t.textContent=t.dataset.number},n=o=>{const c=o;t(c);const s=e(),d=[...document.querySelectorAll(".cell")].findIndex((e=>e===c));let a,r;10===document.boardSize?(a=d>document.boardSize-1?+d.toString()[0]:0,r=d>document.boardSize-1?+d.toString()[1]:d):(a=Math.floor(d/document.boardSize),r=d%document.boardSize);const u=[];u.push(s[a-1]?.[r]),u.push(s[a-1]?.[r+1]),u.push(s[a-1]?.[r-1]),u.push(s[a]?.[r+1]),u.push(s[a]?.[r-1]),u.push(s[a+1]?.[r+1]),u.push(s[a+1]?.[r]),u.push(s[a+1]?.[r-1]),u.filter((e=>e&&"ðŸš©"!==e.textContent)).forEach((e=>{e.dataset.number||e.classList.contains("is-open")?t(e):n(e)}))},o=e=>{const o=e.target;!o.classList.contains("cell")||o.classList.contains("isBomb")||o.textContent||(o.classList.contains("is-open")||(document.querySelector(".moves-count").innerHTML=`Your moves: ${document.movesCount+=1}`,document.querySelector(".sound-switcher").checked&&new Audio("../src/assets/sounds/empty-cell.mp3").play()),t(o),o.dataset.number||n(o))},c=()=>{const e=new Audio("../src/assets/sounds/click.mp3");document.querySelector(".sound-switcher").checked&&e.play()},s=()=>{if(!document.querySelector(".bomb")&&!document.body.classList.contains("win")&&document.querySelector(".isBomb")){c();const e=document.querySelector(".main").innerHTML,t=[...document.body.classList],n=parseInt(document.querySelector(".timer").textContent.slice(6),10),{boardSize:o,minesCount:s,movesCount:d,flagCount:a}=document,r={html:e,layoutState:t,boardSize:o,minesCount:s,movesCount:d,flagCount:a,timer:n},u=JSON.stringify(r);localStorage.setItem("savedGame",u)}},d=e=>{const t=e.target,n=document.querySelector(".counter");if(e.preventDefault(),t.classList.contains("cell")&&!t.classList.contains("is-open")){const e=new Audio("../src/assets/sounds/flag.mp3");t.textContent?(document.querySelector(".sound-switcher").checked&&e.play(),t.textContent="",document.flagCount+=1,n.textContent=`Mines count: ${document.flagCount}`):(document.querySelector(".sound-switcher").checked&&e.play(),t.textContent="ðŸš©",document.flagCount-=1,n.textContent=`Mines count: ${document.flagCount}`)}},a=e=>{const t=document.querySelector(".btn"),n=document.querySelector(".board");"ðŸš©"!==e.target.textContent&&(e.target.classList.contains("isBomb")?([...document.querySelectorAll(".cell")].filter((e=>e.classList.contains("isBomb"))).forEach((e=>{const t=document.createElement("div");t.classList.add("bomb"),e.classList.add("is-open"),e.textContent="",e.append(t)})),document.querySelector(".sound-switcher").checked&&new Audio("../src/assets/sounds/bomb.mp3").play(),e.target.firstElementChild.style.backgroundColor="red",clearInterval(document.timer),t.textContent="ðŸ˜©",n.removeEventListener("click",o),n.removeEventListener("contextmenu",d),n.removeEventListener("click",a),n.removeEventListener("click",s)):[...document.querySelectorAll(".cell")].filter((e=>!e.classList.contains("is-open"))).length===document.minesCount&&(document.querySelector(".sound-switcher").checked&&new Audio("../src/assets/sounds/win.mp3").play(),clearInterval(document.timer),t.textContent="ðŸ¤©",document.body.classList.add("win"),n.removeEventListener("click",o),n.removeEventListener("click",a),n.removeEventListener("contextmenu",d),n.removeEventListener("click",s),(()=>{const e=+localStorage.getItem("gameId")+1||1,t=document.body.classList.value.includes("layout")?document.body.classList.value.split(" ")[0].slice(0,7):"easy";e>10&&localStorage.removeItem(""+(e-10)),localStorage.setItem(e,`Game #${e} _ Mode: ${t} _ Time: ${document.querySelector(".timer").textContent.slice(7)} _ Moves: ${document.querySelector(".moves-count").textContent.slice(11)}`),localStorage.setItem("gameId",e)})()))},r=a,u=(e=0)=>{let t=e;document.timer=setInterval((()=>{document.querySelector(".timer").innerHTML=`Timer: ${t+=1} sec`}),1e3)},l=t=>{document.querySelector(".board").removeEventListener("click",l),((e,t)=>{const n=document.querySelectorAll(".cell"),o=((e,t)=>{const n=[];for(;n.length<e;){const e=(o=document.boardSize**2-1,Math.floor(Math.random()*(o-0+1))+0);n.includes(e)||e===t||n.push(e)}var o;return n})(e,[...n].findIndex((e=>e===t.target)));[...n].filter(((e,t)=>o.includes(t))).forEach((e=>e.classList.add("isBomb")))})(document.minesCount,t),(()=>{const t=document.querySelectorAll(".cell"),n=(()=>{const t=e(),n=[];for(let e=0;e<t[0].length;e+=1)for(let o=0;o<t[0].length;o+=1){const c=[];c.push(t[e-1]?.[o]),c.push(t[e-1]?.[o+1]),c.push(t[e-1]?.[o-1]),c.push(t[e]?.[o+1]),c.push(t[e]?.[o-1]),c.push(t[e+1]?.[o+1]),c.push(t[e+1]?.[o]),c.push(t[e+1]?.[o-1]),n.push(c.filter((e=>e&&e.classList.contains("isBomb"))).length)}return n})();t.forEach(((e,t)=>{const o=e;!o.classList.contains("isBomb")&&n[t]&&(o.dataset.number=n[t])}))})(),u(),document.querySelector(".btn").textContent="ðŸ˜Ž"},m=l,i=()=>{document.movesCount=0;const e=(()=>{const e=document.createElement("main");e.classList.add("main");const t=document.createElement("div");t.classList.add("board"),t.setAttribute("id","board");for(let e=0;e<document.boardSize**2;e+=1){const e=document.createElement("div");e.classList.add("cell"),t.append(e)}return e.append(t),e})();e.prepend((()=>{const e=document.createElement("div");e.classList.add("controls-panel");const t=document.createElement("p");t.classList.add("moves-count"),t.textContent="Your moves: 0",e.append(t);const n=document.createElement("btn");n.classList.add("btn"),n.textContent="ðŸ˜‰",e.append(n),document.flagCount=document.minesCount;const o=document.createElement("p");return o.classList.add("counter"),o.textContent=`Mines count: ${document.flagCount}`,e.append(o),e})()),document.body.append(e),(()=>{const e=document.getElementById("board");e.addEventListener("click",m),e.addEventListener("click",o),e.addEventListener("click",r),e.addEventListener("contextmenu",d)})(),document.querySelector(".btn").addEventListener("click",(()=>{c(),clearInterval(document.timer),document.querySelector(".timer").textContent="Timer: 0 sec",document.querySelector("main").remove(),document.body.classList.remove("win"),i()}))},p=i,b=()=>{clearInterval(document.timer),document.querySelector(".timer").textContent="Timer: 0 sec",document.querySelector("main").remove(),document.body.classList.remove("win"),p()},y=e=>{c(),e.target.classList.contains("easy-mode")?(document.boardSize=10,document.body.classList.remove("medium-layout"),document.body.classList.remove("suicide-layout"),document.querySelector(".mine-counter-selector").value=10,document.minesCount=10,b()):e.target.classList.contains("medium-mode")?(document.boardSize=15,document.body.classList.remove("suicide-layout"),document.body.classList.add("medium-layout"),document.querySelector(".mine-counter-selector").value=25,document.minesCount=25,b()):e.target.classList.contains("suicide-mode")&&(document.boardSize=25,document.body.classList.remove("medium-layout"),document.body.classList.add("suicide-layout"),document.querySelector(".mine-counter-selector").value=99,document.minesCount=99,b())},L=()=>{if(c(),localStorage.getItem("savedGame")){clearInterval(document.timer);const e=localStorage.getItem("savedGame"),{html:t,layoutState:n,boardSize:c,minesCount:s,movesCount:a,flagCount:l,timer:m}=JSON.parse(e);document.minesCount=s,document.boardSize=c,document.movesCount=a,document.flagCount=l,document.querySelector("main").innerHTML=t,document.body.className=n.join(" ");const i=document.getElementById("board");i.addEventListener("click",o),i.addEventListener("click",r),i.addEventListener("contextmenu",d),document.querySelector(".btn").addEventListener("click",b),document.querySelector(".mine-counter-selector").value=s,u(m)}},v=e=>{e.target.closest(".modal")?e.target.closest(".btn-modal")&&(document.querySelector(".overlay").remove(),document.body.style.overflow=""):(document.querySelector(".overlay").remove(),document.body.style.overflow="")},S=()=>{const e=document.createElement("div");e.classList.add("overlay"),document.body.append(e),document.body.style.overflow="hidden",e.addEventListener("click",v)};document.minesCount=10,document.boardSize=10,document.body.append((()=>{const e=document.createElement("div");e.classList.add("load-game-container");const t=document.createElement("button");t.textContent="Save",t.classList.add("save"),t.addEventListener("click",s),e.append(t);const n=document.createElement("button");n.textContent="Load",n.classList.add("load"),n.addEventListener("click",L),e.append(n);const o=document.createElement("button");o.textContent="About",o.classList.add("about__btn"),e.append(o);const c=document.createElement("div");c.classList.add("mode"),c.addEventListener("click",y);const d=document.createElement("button");d.textContent="Easy",d.classList.add("easy-mode"),c.append(d);const a=document.createElement("button");a.textContent="Medium",a.classList.add("medium-mode"),c.append(a);const r=document.createElement("button");r.textContent="Suicide",r.classList.add("suicide-mode"),c.append(r);const u=document.createElement("p");u.classList.add("settings-subtitle"),u.textContent="Mines:",c.append(u);const l=document.createElement("input");l.classList.add("mine-counter-selector"),l.setAttribute("type","range"),l.setAttribute("value","10"),l.setAttribute("min","10"),l.setAttribute("max","99"),l.addEventListener("input",(e=>{document.querySelector(".counter").textContent=`Mines count: ${e.target.value}`,document.minesCount=+e.target.value,b()})),c.append(l);const m=document.createElement("div");m.classList.add("settings"),m.classList.add("controls-panel");const i=document.createElement("button");i.classList.add("btn-results"),i.textContent="results",m.append(i);const p=document.createElement("p");p.classList.add("timer"),p.textContent="Timer: 0 sec",m.append(p);const v=document.createElement("label"),S=document.createElement("span");S.textContent="ðŸ””",v.append(S);const E=document.createElement("input");E.setAttribute("type","checkbox"),E.setAttribute("checked","true"),E.classList.add("sound-switcher"),v.append(E),m.append(v);const h=document.createElement("button");h.classList.add("theme-switcher"),m.append(h),h.addEventListener("click",(e=>{e.target.classList.toggle("is-dark")}));const g=document.createElement("header");return g.classList.add("header"),g.append(e),g.append(c),g.append(m),g})()),p(),document.querySelector(".theme-switcher").addEventListener("click",(()=>{c(),document.body.classList.toggle("dark-theme")})),document.querySelector(".btn-results").addEventListener("click",(()=>{c(),S();const e=document.querySelector(".overlay"),t=document.createElement("h2");t.classList.add("modal-title"),t.textContent="Latest Results",e.append(t);const n=(()=>{const e=+localStorage.getItem("gameId"),t=[];for(let n=0;n<10;n+=1){const o=localStorage.getItem(e-n);t.push(o)}return t})(),o=document.createElement("ul");o.classList.add("modal");const s=document.createElement("button");s.classList.add("btn-modal"),s.textContent="âœ–",o.append(s),n.forEach((e=>{const t=document.createElement("li");t.textContent=e,o.append(t)})),e.append(o)})),document.querySelector(".about__btn").addEventListener("click",(()=>{c(),S();const e=document.querySelector(".overlay"),t=document.createElement("h2");t.classList.add("modal-title"),t.textContent="About Game",e.append(t);const n=document.createElement("div");n.classList.add("modal"),n.classList.add("about");const o=document.createElement("button");o.classList.add("btn-modal"),o.textContent="âœ–",n.append(o);const s=document.createElement("img");s.classList.add("about__img"),s.setAttribute("src","../src/assets/img/about.png"),n.append(s);const d=document.createElement("a");d.setAttribute("href","https://github.com/glitch-surfer"),d.classList.add("about__text"),d.textContent="Made by Glitch_surfer",n.append(d),e.append(n)})),document.querySelector("label").addEventListener("click",(e=>{c();const t=e.target;document.querySelector(".sound-switcher").checked?t.textContent="ðŸ”•":t.textContent="ðŸ””"}))})();
//# sourceMappingURL=bundle.js.map